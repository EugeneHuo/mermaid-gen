<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Mermaid Diagram</title>
</head>
<body>
    <div class="mermaid">

flowchart TD
    subgraph Metadata
        title(Pipeline Name)
        purpose[Purpose: description]
        note[Owner: Team Name]
    end

    subgraph Step1_Ingestion
        A[" Type: PDF documents<br/> Source: GCS bucket"]
    end

    subgraph Step2_Chunking
        B[" Method: RecursiveCharacterTextSplitter<br/> Size: 1200 tokens, Overlap: 100<br/> Splits by: Paragraph headers"]
    end

    subgraph Step3_Embedding
        C[" Model: Config[embedding-model]<br/> Service: OpenAI API<br/> Cache: embeddings.pkl stores: doc_embeddings_dict"]
    end

    subgraph Step4_Storage
        D[(GCS Bucket)]
        E[(Turbopuffer)]
        F[(Firestore)]
    end

    A --> B
    B --> C
    C --> D
    C --> E
    C --> F

    </div>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>
